# [BOF:TT大包生成脚本](https://gitee.com/MiyakoMeow/boftt-pack-generator-scripts)

脚本地址：Gitee上搜MiyakoMeow/boftt-pack-generator-scripts

## HQ版和LQ版怎么选？

1. HQ版：FLAC/OGG音频，同文件名下只保留一种视频格式，优先MP4/AVI，其次WMV/MPG/MPEG。
2. LQ版：在HQ版的基础上构建，FLAC音频转成OGG，MP4/AVI转成MPG。

选择建议：

1. LR2玩家选LQ版。
2. 希望获得更高的音频质量和BGA质量，选HQ版。
3. 希望占用空间更小的玩家，选LQ版。

提示：

1. 本人并非LR2玩家，LQ版包仅在LR2上对少部分作品做了抽查。
2. 已知问题：部分有BGA的作品，BGA在LR2上无法播放的情况。
3. 如果有将MP4视频转换成LR2**保证可播放**的格式的方法，或者有关于该大包的其他问题，请联系我。

## 下载链接

### 123云盘

- [123盘链接](https://www.123pan.com/s/Sn7lVv-Mhzm)
提取码：ORtY

### 度盘

- [度盘链接](https://pan.baidu.com/s/17seD5TCAlquX2rJ6CS4ZDg?pwd=6i8t)
提取码：6i8t

### 镜像站

- [bms.iidx.ca](https://bms.iidx.ca/bms/BMS/BMS%20%E6%B4%BB%E5%8A%A8%E5%8C%85/BOF%20G2R/%5B2024%5D%20BOFTT/)

## 特殊情况列表

- no.198, 199, 245, 258, 283, 286, 287, 301 使用了62进制BMS，不兼容LR2和beatoraja 0.8.7之前的版本。

对于LR2玩家，如果导入作品时出现问题，请优先移除以上作品。

- no.239 NSFW作品，提供了可供替换的安全BGI。已包含在大包中，但不默认启用，文件名为*_censored。

- no.155, 312, 452 包含空wav文件，已删除，基本不影响游玩。

- no.472 BMSON文件解析错误（第19行少了一个逗号），已补齐（BMS文件修改注意）。未经修改的文件以_ori为后缀。
经过实测，在beatoraja 0.8.7中，未经修改的谱面文件无法被读取。

## 下载记录

时区：GMT+8（中国标准时间）

- 2024.10.23 开始重新下载所有包。

- 截至 2024.10.24 00:15, 下载至no.270。

- 截至 2024.10.24 05:00, 下载了全部483个作品。

- 2024.10.26 06:00 更新所有登陆情报修正作品。

- 2024.10.28 08:00 更新所有登陆情报修正作品。

## 脚本使用方式

### 第一次打包

1. 下载BMS文件至BMS_PACK_DIR。

2. 运行`rawpack_set_num.py`，填入步骤1中目录，手动给每个文件的文件名前打上编号。

> - 直接回车刷新文件列表
> - 输入一个数字A：给文件列表中的第一个文件打上编号A
> - 输入两个数字A、B：给文件列表中，下标为A的文件，即第（A+1）个文件，打上编号B

3. 运行`rawpack_unzip_to_bms_folder.py`，填入步骤1中目录和解压目标路径，将打上编号后的文件解压或移动至目标路径。

4. 运行`f_set_name_by_bms.py`，填入步骤3中的目标路径。该脚本会读取各个文件夹内的BMS文件，自动重命名文件夹。

5. 运行`pack_raw_to_hq.py`，填入步骤3中的目标路径。如果一切顺利，命令执行成功后，HQ版本的文件就完成了。

6. 复制经过步骤4处理后的目录，用于在保留原HQ版文件的情况下制作LQ版。如果不想保留HQ版本文件，可忽略该步骤。

7. 运行`pack_hq_to_lq.py`，填入经过步骤4或步骤5处理后的目录。如果一切顺利，命令执行成功后，LQ版本的文件就完成了。

### 更新差分包生成

1. 下载BMS文件至BMS_PACK_DIR。

2. 运行`rawpack_set_num.py`，使用方法同上。

3. 运行`rawpack_unzip_to_bms_folder.py`，使用方法同上，但需将文件解压至一个空目录，方便后续差分包生成。

4. 运行`f_set_name_by_another_folder.py`，先填入第一次打包中步骤4运行的目录，后填入步骤3的解压目录，可以同步文件夹名。

5. 运行`pack_raw_to_hq.py`，填入步骤3中操作的路径。如果一切顺利，命令执行成功后，HQ版本的文件就完成了。

6. 运行`soft_syncing_folder.py`，先填入步骤5中操作的路径（记为A），再填入第一次打包后HQ版本的目录路径（第一次打包步骤5的操作路径）（记为B），最后选择模式时输入1（切记！！！）。

> - 该脚本会递归扫描A中的每个文件。
> - 如果A中的文件，在B中对应位置，已经存在且内容相同，则删除A中对应文件。否则不执行任何操作。

执行完该步后，HQ版本的更新差分包就可以制作了。

7. 运行`pack_hq_to_lq.py`，使用方法同上。用于制作LQ版本更新差分包。
